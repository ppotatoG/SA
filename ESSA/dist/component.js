import e,{useRef as t,useEffect as s}from"react";const a={saNodes:[],threshold:.1,setThreshold:function(e){if("string"==typeof e){if(""===(e=e.trim()))return console.warn("threshold value is empty, using default value 0.1"),.1;if(!isFinite(Number(e)))return console.warn(`invalid threshold value "${e}", using default value 0.1`),.1;e=Number(e)}return"number"!=typeof e?(console.warn(`invalid threshold value "${e}", using default value 0.1`),.1):(e>1&&(console.warn(`threshold value "${e}" cannot be greater than 1, using maximum value 1`),e=1),e)},intersection:function(){if(a.saNodes&&a.saNodes.length)for(const e of a.saNodes)n.observe(e)},init:function(e){void 0!==e&&(a.threshold=a.setThreshold(e)),a.intersection()}},n=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target;if(!(t instanceof HTMLDivElement))return!1;"false"===t.dataset.saOnce?e.isIntersecting?t.classList.add("saShow"):!e.isIntersecting&&t.classList.contains("saShow")&&t.classList.remove("saShow"):e.isIntersecting&&(t.classList.add("saShow"),n.unobserve(t))}))}),{threshold:a.threshold}),r=({type:n,duration:r,delay:o,timing:i,once:l,className:u,children:d})=>{const c=t(null);return s((()=>{var e;const t=c.current;if(!t)return;const s=l?"false":"true";return t.setAttribute("data-sa",`${n}`),t.setAttribute("data-sa-duration",`${r}`),t.setAttribute("data-sa-delay",`${o}`),t.setAttribute("data-sa-time",`${i}`),t.setAttribute("data-sa-once",s),null===(e=a.saNodes)||void 0===e||e.push(t),a.intersection(),()=>{var e;a.saNodes=null===(e=a.saNodes)||void 0===e?void 0:e.filter((e=>e!==t))}}),[n,r,o,i,l]),e.createElement("div",{className:`saBox ${u}`,ref:c},d)};export{r as default};
